unset SSH_ASKPASS

export BROWSER=$(which xdg-open)
export EDITOR=vim
export PATH=$HOME/prefix/bin:$PATH
export PATH=$HOME/android-sdk/platform-tools:$PATH
export PATH=$HOME/android-sdk/tools:$PATH
export PATH=$PATH:$HOME/.cabal/bin:/opt/clean/bin 
export PATH=$PATH:"/home/lennart/anaconda3/bin"

function bin_exists () {
    type $1 > /dev/null 2>&1 || return 1
    return 0
}

if bin_exists docker; then
    alias d=docker
    alias dps='docker ps -a'
fi

if bin_exists pacman; then
    alias update='sudo pacman -Syu'
    alias install='sudo pacman -Syu && sudo pacman -S --needed'
    alias search='pacman -Ss'

    function binaries () {
        pacman -Ql $1 | grep /usr/bin | awk '{print $2}' | cut -d'/' -f4
    }
elif bin_exists apt-get; then
    alias update='sudo apt-get update'
    alias install='sudo apt-get install'
    alias search='apt-cache search'
elif bin_exists pkg; then
    alias install='sudo pkg install'
    alias search='pkg search'
fi

if bin_exists notify-send; then
    alias alert="notify-send '$(ps -p $$ --no-headers -o comm,pid)'"
fi

function gh () {
    git clone "https://github.com/lennart96/$1"
}

# vim in shell

alias q=clear
alias :e="$EDITOR"
alias :q=exit
alias :t=file
alias :m="$EDITOR Makefile"
alias :r="make clean; make run"
alias e=:e
alias m=make
alias mr='clear;:r'

alias ls='ls --time-style=+"%Y-%m-%d %H:%M" --color --group-directories-first'
alias grep='grep --color'

# human-friendly
alias free='free -m'
alias cp='cp -i'
alias df='df -h'

alias ipynb='ipython notebook'
alias ipy="ipython -i -c 'cd Dropbox/ipython' --pylab --no-banner --no-confirm-exit --classic --autocall=1"

export HISTSIZE=20000

if [ -n "$ZSH_VERSION" ]; then

    # zsh

    setopt hist_ignore_space
    unsetopt autocd
    setopt nomatch
    zstyle :compinstall filename '$HOME/.zshrc'

    autoload -U promptinit
    promptinit
    prompt off

    autoload -Uz compinit
    compinit

    HISTFILE=$HOME/.zsh_history
    SAVEHIST=${HISTSIZE}

    setopt vi
    cdpath=( . ~/db ~/projects ~ /usr)

    PROMPT='%(?.. -> %? 
)%{%4F%}%2~%{%f%}'
    TIMEFMT='%J  -- %E (%U+%S %Mkb %c+%w)'

elif [ -n "$BASH_VERSION" ]; then

    # bash

    export HISTFILESIZE=${HISTSIZE}
    export HISTCONTROL=ignoreboth

    PS1='\W\$ '

    EC () { echo -e ' -> '$?; }
    trap EC ERR
fi

